<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Find your perfect trip in 10 seconds. Move the slider, click the globe. Zero stress travel planner.">
    <meta name="keywords" content="travel, viaggio, voyage, viaje, reise, trip planner, vacation, holidays">
    <title>Gloober - Zero Stress Travel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #0f766e, #065f46, #064e3b);
            min-height: 100vh;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        /* Language selector */
        .lang-selector {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
            display: flex;
            gap: 10px;
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 25px;
            backdrop-filter: blur(10px);
        }
        
        .lang-btn {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            opacity: 0.6;
            transition: all 0.3s ease;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .lang-btn:hover {
            opacity: 1;
            transform: scale(1.1);
        }
        
        .lang-btn.active {
            opacity: 1;
            box-shadow: 0 0 10px rgba(251, 191, 36, 0.5);
            border: 2px solid #fbbf24;
        }
        
        /* Slider orizzontale */
        .vibes-slider-horizontal {
            position: relative;
            width: 100%;
            height: 60px;
            margin: 20px auto 20px;
            border-radius: 30px;
            background: linear-gradient(to right, #fbbf24 0%, #f59e0b 50%, #fbbf24 100%);
            cursor: pointer;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        /* Etichette dentro lo slider */
        .slider-inner-labels {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            pointer-events: none;
        }
        
        .slider-inner-labels span {
            color: rgba(0, 0, 0, 0.5);
            font-size: 14px;
            font-weight: 600;
            text-shadow: 0 1px 2px rgba(255,255,255,0.3);
        }
        
        .slider-inner-labels .label-center {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            transition: opacity 0.3s ease;
        }
        
        .slider-inner-labels .label-center.hidden {
            opacity: 0;
        }
        
        .vibes-dot {
            position: absolute;
            width: 56px;
            height: 56px;
            background: radial-gradient(circle at 30% 30%, #60a5fa, #3b82f6, #2563eb, #1e40af);
            border: 3px solid rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            cursor: grab;
            top: 2px;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: inset -10px -10px 20px rgba(0, 0, 0, 0.4), 0 4px 16px rgba(0, 0, 0, 0.3);
            transition: left 0.3s ease, transform 0.2s ease;
            position: relative;
        }
        
        .vibes-dot.dragging {
            cursor: grabbing;
        }
        
        .vibes-dot.clickable {
            transform: translateX(-50%) scale(1.05);
            cursor: pointer;
        }
        
        .vibes-dot.clickable:hover {
            transform: translateX(-50%) scale(1.1);
        }
        
        /* Mini continenti nel globo */
        .vibes-dot::before {
            content: '';
            position: absolute;
            background: radial-gradient(ellipse, #10b981, #059669);
            width: 12px;
            height: 10px;
            top: 25%;
            left: 50%;
            border-radius: 50%;
            transform: translateX(-50%);
        }
        
        .vibes-dot::after {
            content: '';
            position: absolute;
            background: radial-gradient(ellipse, #10b981, #059669);
            width: 15px;
            height: 8px;
            bottom: 30%;
            left: 45%;
            border-radius: 50%;
            transform: translateX(-50%);
        }
        
        /* Testo JUST GLOOB IT sotto il globo */
        .gloob-text {
            position: absolute;
            bottom: -35px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            white-space: nowrap;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            background: rgba(0, 0, 0, 0.3);
            padding: 4px 12px;
            border-radius: 20px;
        }
        
        .vibes-dot.clickable .gloob-text {
            opacity: 1;
        }
        
        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(6, 95, 70, 0.95);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            margin-top: 4px;
            z-index: 50;
            max-height: 200px;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .dropdown-item {
            padding: 12px 16px;
            color: white;
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .dropdown-item:hover {
            background: rgba(255, 255, 255, 0.15);
        }
        
        @keyframes spinGlobe {
            from { transform: rotateZ(0deg); }
            to { transform: rotateZ(360deg); }
        }
        
        /* Stelle Hotel */
        .stars-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            cursor: pointer;
        }
        
        .stars-selector {
            display: flex;
            gap: 5px;
        }
        
        .star {
            font-size: 24px;
            cursor: pointer;
            transition: all 0.2s;
            opacity: 0.3;
            filter: grayscale(1);
        }
        
        .star.active {
            opacity: 1;
            filter: grayscale(0);
            transform: scale(1.1);
        }
        
        .star:hover {
            transform: scale(1.2);
        }
        
        .stars-label {
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            font-weight: 500;
        }
        
        .hidden { display: none; }
    </style>
</head>
<body class="text-white">
    <!-- Language Selector -->
    <div class="lang-selector">
        <div class="lang-btn active" data-lang="it" title="Italiano">üáÆüáπ</div>
        <div class="lang-btn" data-lang="en" title="English">üá¨üáß</div>
        <div class="lang-btn" data-lang="es" title="Espa√±ol">üá™üá∏</div>
        <div class="lang-btn" data-lang="fr" title="Fran√ßais">üá´üá∑</div>
        <div class="lang-btn" data-lang="de" title="Deutsch">üá©üá™</div>
    </div>

    <!-- STEP 1: FORM -->
    <div id="form-step">
        <div class="container mx-auto px-4 py-8">
            <div class="text-center mb-8">
                <h1 class="text-5xl font-bold mb-4 bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent">
                    Gloober
                </h1>
                <p class="text-xl text-gray-300" data-translate="subtitle">Zero stress, book happiness! ‚úàÔ∏è</p>
            </div>

            <div class="max-w-2xl mx-auto">
                <div class="glass-card rounded-2xl p-6">
                    <!-- Budget -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium mb-2">üí∞ <span data-translate="budget">Budget totale</span></label>
                        <div class="grid grid-cols-3 gap-3">
                            <input type="number" id="budget" value="1000" min="100" max="10000" step="100" 
                                   class="col-span-2 px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white text-xl font-bold">
                            <select id="currency" class="px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white">
                                <option value="EUR">‚Ç¨ EUR</option>
                                <option value="GBP">¬£ GBP</option>
                                <option value="CHF">CHF</option>
                                <option value="USD">$ USD</option>
                                <option value="DKK">DKK</option>
                                <option value="SEK">SEK</option>
                                <option value="NOK">NOK</option>
                                <option value="CZK">CZK</option>
                                <option value="PLN">PLN</option>
                            </select>
                        </div>
                    </div>

                    <!-- Persone -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium mb-2">üë• <span data-translate="people">Quante persone</span></label>
                        <select id="people" class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white">
                            <option value="1" data-translate="person1">1 persona</option>
                            <option value="2" selected data-translate="person2">2 persone</option>
                            <option value="3" data-translate="person3">3 persone</option>
                            <option value="4" data-translate="person4">4 persone</option>
                        </select>
                    </div>

                    <!-- Quando -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium mb-2">üìÖ <span data-translate="when">Quando partiamo</span></label>
                        <div class="relative">
                            <button type="button" onclick="toggleDateMenu()" 
                                    class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white flex justify-between items-center">
                                <span id="when-selected" data-translate="today">OGGI</span>
                                <span>‚ñº</span>
                            </button>
                            <div id="date-menu" class="dropdown-menu hidden"></div>
                        </div>
                    </div>

                    <!-- Durata -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium mb-2">‚è±Ô∏è <span data-translate="duration">Per quanto tempo</span></label>
                        <div class="relative">
                            <button type="button" onclick="toggleDurationMenu()" 
                                    class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white flex justify-between items-center">
                                <span id="duration-selected" data-translate="twoDays">Due giorni</span>
                                <span>‚ñº</span>
                            </button>
                            <div id="duration-menu" class="dropdown-menu hidden"></div>
                        </div>
                    </div>
                    
                    <!-- Stelle Hotel -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium mb-2">üè® <span data-translate="hotelCategory">Categoria hotel</span></label>
                        <div class="stars-container">
                            <div class="stars-selector" id="stars-selector">
                                <span class="star" data-stars="1" onclick="selectStars(1)">‚≠ê</span>
                                <span class="star" data-stars="2" onclick="selectStars(2)">‚≠ê</span>
                                <span class="star" data-stars="3" onclick="selectStars(3)">‚≠ê</span>
                                <span class="star" data-stars="4" onclick="selectStars(4)">‚≠ê</span>
                                <span class="star" data-stars="5" onclick="selectStars(5)">‚≠ê</span>
                            </div>
                            <span class="stars-label" id="stars-label" data-translate="stars3">3 stelle</span>
                        </div>
                    </div>

                    <!-- Vibes Slider -->
                    <div class="mb-8">
                        <label class="block text-sm font-medium mb-4 text-center">‚ú® <span data-translate="travelVibes">Travel vibes</span></label>
                        <div class="vibes-slider-horizontal" id="vibes-slider" onclick="moveVibesDot(event)" ontouchmove="moveVibesDot(event)" ontouchstart="moveVibesDot(event)">
                            <div class="slider-inner-labels">
                                <span data-translate="sea">üèñÔ∏è MARE</span>
                                <span class="label-center hidden" data-translate="city">üé® CITT√Ä D'ARTE</span>
                                <span data-translate="mountain">üèîÔ∏è MONTAGNA</span>
                            </div>
                            <div class="vibes-dot" id="vibes-dot" onclick="handleGlobeClick(event)">
                                <span class="gloob-text">JUST GLOOB IT</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- STEP 1.5: SELEZIONE AEROPORTO -->
    <div id="airport-step" class="hidden">
        <div class="container mx-auto px-4 py-8">
            <div class="text-center mb-8">
                <div style="font-size: 80px; margin-bottom: 20px;">‚úàÔ∏è</div>
                <h2 class="text-3xl font-bold mb-4 text-white" data-translate="whereFrom">
                    Da dove decolliamo?
                </h2>
            </div>

            <div class="max-w-2xl mx-auto">
                <div class="glass-card rounded-2xl p-6">
                    <div class="mb-6">
                        <input type="text" 
                               id="airport-search" 
                               placeholder="Cerca il tuo aeroporto..." 
                               data-translate-placeholder="searchAirport"
                               class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white placeholder-white/50"
                               onkeyup="filterAirports()">
                    </div>
                    
                    <div class="mb-6">
                        <select id="airport-select" size="10" 
                                class="w-full px-4 py-3 rounded-xl bg-white/10 border border-white/20 text-white"
                                style="min-height: 300px;">
                            <optgroup label="Popular">
                                <option value="FCO">Rome Fiumicino</option>
                                <option value="MXP">Milan Malpensa</option>
                                <option value="LHR">London Heathrow</option>
                                <option value="CDG">Paris Charles de Gaulle</option>
                                <option value="MAD">Madrid Barajas</option>
                                <option value="BCN">Barcelona</option>
                                <option value="AMS">Amsterdam</option>
                                <option value="FRA">Frankfurt</option>
                                <option value="JFK">New York JFK</option>
                                <option value="DXB">Dubai</option>
                            </optgroup>
                            <optgroup label="Europe">
                                <option value="LIN">Milan Linate</option>
                                <option value="BGY">Milan Bergamo</option>
                                <option value="VCE">Venice</option>
                                <option value="NAP">Naples</option>
                                <option value="BLQ">Bologna</option>
                                <option value="LGW">London Gatwick</option>
                                <option value="ORY">Paris Orly</option>
                                <option value="MUC">Munich</option>
                                <option value="BER">Berlin</option>
                                <option value="VIE">Vienna</option>
                                <option value="ZRH">Zurich</option>
                                <option value="GVA">Geneva</option>
                                <option value="BRU">Brussels</option>
                                <option value="CPH">Copenhagen</option>
                                <option value="STO">Stockholm</option>
                                <option value="OSL">Oslo</option>
                                <option value="HEL">Helsinki</option>
                                <option value="ATH">Athens</option>
                                <option value="LIS">Lisbon</option>
                                <option value="DUB">Dublin</option>
                            </optgroup>
                            <optgroup label="Americas">
                                <option value="LAX">Los Angeles</option>
                                <option value="MIA">Miami</option>
                                <option value="MEX">Mexico City</option>
                                <option value="GRU">S√£o Paulo</option>
                                <option value="EZE">Buenos Aires</option>
                                <option value="YYZ">Toronto</option>
                            </optgroup>
                            <optgroup label="Asia-Pacific">
                                <option value="NRT">Tokyo Narita</option>
                                <option value="ICN">Seoul</option>
                                <option value="SIN">Singapore</option>
                                <option value="HKG">Hong Kong</option>
                                <option value="BKK">Bangkok</option>
                                <option value="SYD">Sydney</option>
                            </optgroup>
                        </select>
                    </div>
                    
                    <button onclick="confirmAirport()" 
                            class="w-full bg-gradient-to-r from-yellow-400 to-orange-500 text-black font-bold py-3 px-6 rounded-xl hover:from-yellow-300 hover:to-orange-400 transition-all"
                            data-translate="letsGo">
                        Voliamo! üõ´
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- STEP 2: LOADING -->
    <div id="loading-step" class="hidden min-h-screen flex items-center justify-center">
        <div class="text-center">
            <div style="width: 300px; height: 300px; margin: 0 auto;">
                <div style="animation: spinGlobe 3s linear infinite;">
                    <div style="width: 250px; height: 250px; margin: 0 auto; border-radius: 50%; background: radial-gradient(circle at 30% 30%, #60a5fa, #3b82f6, #2563eb, #1e40af); box-shadow: inset -40px -40px 60px rgba(0, 0, 0, 0.4), 0 0 60px rgba(59, 130, 246, 0.6); position: relative;">
                        <!-- Continenti -->
                        <div style="position: absolute; background: radial-gradient(ellipse, #10b981, #059669); width: 50px; height: 40px; top: 15%; left: 48%; border-radius: 50%; transform: rotate(-15deg);"></div>
                        <div style="position: absolute; background: radial-gradient(ellipse, #10b981, #059669); width: 60px; height: 80px; top: 45%; left: 47%; border-radius: 50%;"></div>
                        <div style="position: absolute; background: radial-gradient(ellipse, #10b981, #059669); width: 70px; height: 50px; top: 20%; right: 15%; border-radius: 50%;"></div>
                    </div>
                </div>
            </div>
            <h2 class="text-3xl font-bold mt-4">Gloobing...</h2>
            <p class="text-gray-300 mt-2" id="loading-text" data-translate="findingAdventure">Sto trovando la tua prossima avventura</p>
        </div>
    </div>

    <!-- STEP 3: RISULTATI -->
    <div id="result-step" class="hidden container mx-auto px-4 py-8">
        <div id="result-content" class="max-w-6xl mx-auto">
            <!-- Header con descrizione -->
            <div class="glass-card rounded-2xl p-6 text-center mb-6">
                <h2 class="text-3xl font-bold text-yellow-400 mb-3" id="destination-name">Caricamento...</h2>
                <p class="text-xl text-white italic" id="ai-description">...</p>
            </div>
            
            <!-- Cards Volo e Hotel -->
            <div class="grid md:grid-cols-2 gap-6 mb-8">
                <!-- Card Volo -->
                <div class="glass-card rounded-2xl p-6">
                    <h3 class="text-xl font-bold mb-4 text-yellow-400">‚úàÔ∏è <span data-translate="yourFlight">Il tuo volo</span></h3>
                    <div id="flight-details" class="text-white">
                        <div class="mb-3">
                            <span class="text-gray-400" data-translate="outbound">Andata:</span>
                            <div class="font-semibold" id="flight-outbound">-</div>
                        </div>
                        <div class="mb-3">
                            <span class="text-gray-400" data-translate="return">Ritorno:</span>
                            <div class="font-semibold" id="flight-return">-</div>
                        </div>
                        <div class="mb-4">
                            <span class="text-gray-400" data-translate="airline">Compagnia:</span>
                            <div class="font-semibold" id="flight-airline">-</div>
                        </div>
                        <div class="text-2xl font-bold text-yellow-400 mb-4" id="flight-price">-</div>
                        <button class="w-full bg-gradient-to-r from-yellow-400 to-orange-500 text-black font-bold py-3 px-6 rounded-xl hover:from-yellow-300 hover:to-orange-400 transition-all" id="book-flight">
                            <span data-translate="bookFlight">Prenota Volo</span> ‚Üí
                        </button>
                    </div>
                </div>
                
                <!-- Card Hotel -->
                <div class="glass-card rounded-2xl p-6">
                    <h3 class="text-xl font-bold mb-4 text-yellow-400">üè® <span data-translate="yourHotel">Il tuo hotel</span></h3>
                    <div id="hotel-details" class="text-white">
                        <div class="mb-3">
                            <div class="font-semibold text-lg" id="hotel-name">-</div>
                            <div class="text-yellow-400" id="hotel-stars">-</div>
                        </div>
                        <div class="mb-3">
                            <span class="text-gray-400" data-translate="rating">Valutazione:</span>
                            <div class="font-semibold" id="hotel-rating">-</div>
                        </div>
                        <div class="mb-3">
                            <span class="text-gray-400" data-translate="roomType">Tipo camera:</span>
                            <div class="font-semibold" id="hotel-room">-</div>
                        </div>
                        <div class="text-2xl font-bold text-yellow-400 mb-4" id="hotel-price">-</div>
                        <button class="w-full bg-gradient-to-r from-yellow-400 to-orange-500 text-black font-bold py-3 px-6 rounded-xl hover:from-yellow-300 hover:to-orange-400 transition-all" id="book-hotel">
                            <span data-translate="bookHotel">Prenota Hotel</span> ‚Üí
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Totale -->
            <div class="glass-card rounded-2xl p-6 text-center mb-6">
                <h3 class="text-2xl font-bold text-white mb-2">üí∞ <span data-translate="totalFor">Totale per</span> <span id="total-people">2</span> <span data-translate="persons">persone</span></h3>
                <div class="text-4xl font-bold text-yellow-400" id="total-price">-</div>
            </div>
            
            <!-- Citazione -->
            <div class="glass-card rounded-2xl p-6 text-center">
                <p class="text-lg text-white italic mb-2" id="quote-text">"..."</p>
                <p class="text-gray-400" id="quote-author">- ...</p>
            </div>
            
            <!-- Bottone Nuova Ricerca -->
            <div class="text-center mt-8">
                <button onclick="location.reload()" 
                        class="bg-gradient-to-r from-yellow-400 to-orange-500 text-black font-bold py-3 px-6 rounded-xl">
                    üé≤ Re-Gloob!
                </button>
            </div>
        </div>
    </div>

    <script>
        // TRADUZIONI
        const translations = {
            it: {
                subtitle: "Zero stress, book happiness! ‚úàÔ∏è",
                budget: "Budget totale",
                people: "Quante persone",
                person1: "1 persona",
                person2: "2 persone",
                person3: "3 persone",
                person4: "4 persone",
                when: "Quando partiamo",
                today: "OGGI",
                duration: "Per quanto tempo",
                twoDays: "Due giorni",
                threeDays: "Tre giorni",
                fourDays: "Quattro giorni",
                fiveDays: "Cinque giorni",
                oneWeek: "Una settimana",
                tenDays: "Dieci giorni",
                twoWeeks: "Due settimane",
                hotelCategory: "Categoria hotel",
                stars1: "1 stella",
                stars2: "2 stelle",
                stars3: "3 stelle",
                stars4: "4 stelle",
                stars5: "5 stelle",
                travelVibes: "Travel vibes",
                sea: "üèñÔ∏è MARE",
                city: "üé® CITT√Ä D'ARTE",
                mountain: "üèîÔ∏è MONTAGNA",
                whereFrom: "Da dove decolliamo?",
                searchAirport: "Cerca il tuo aeroporto...",
                letsGo: "Voliamo! üõ´",
                findingAdventure: "Sto trovando la tua prossima avventura",
                yourFlight: "Il tuo volo",
                yourHotel: "Il tuo hotel",
                outbound: "Andata:",
                return: "Ritorno:",
                airline: "Compagnia:",
                bookFlight: "Prenota Volo",
                rating: "Valutazione:",
                roomType: "Tipo camera:",
                roomStandard: "Camera standard",
                roomSuperior: "Camera superior",
                roomSuite: "Suite",
                bookHotel: "Prenota Hotel",
                totalFor: "Totale per",
                persons: "persone",
                months: ["gen", "feb", "mar", "apr", "mag", "giu", "lug", "ago", "set", "ott", "nov", "dic"],
                days: ["Dom", "Lun", "Mar", "Mer", "Gio", "Ven", "Sab"]
            },
            en: {
                subtitle: "Zero stress, book happiness! ‚úàÔ∏è",
                budget: "Total budget",
                people: "How many people",
                person1: "1 person",
                person2: "2 people",
                person3: "3 people",
                person4: "4 people",
                when: "When to go",
                today: "TODAY",
                duration: "How long",
                twoDays: "Two days",
                threeDays: "Three days",
                fourDays: "Four days",
                fiveDays: "Five days",
                oneWeek: "One week",
                tenDays: "Ten days",
                twoWeeks: "Two weeks",
                hotelCategory: "Hotel category",
                stars1: "1 star",
                stars2: "2 stars",
                stars3: "3 stars",
                stars4: "4 stars",
                stars5: "5 stars",
                travelVibes: "Travel vibes",
                sea: "üèñÔ∏è SEA",
                city: "üé® ART CITY",
                mountain: "üèîÔ∏è MOUNTAIN",
                whereFrom: "Where from?",
                searchAirport: "Search your airport...",
                letsGo: "Let's fly! üõ´",
                findingAdventure: "Finding your next adventure",
                yourFlight: "Your flight",
                yourHotel: "Your hotel",
                outbound: "Outbound:",
                return: "Return:",
                airline: "Airline:",
                bookFlight: "Book Flight",
                rating: "Rating:",
                roomType: "Room type:",
                roomStandard: "Standard room",
                roomSuperior: "Superior room",
                roomSuite: "Suite",
                bookHotel: "Book Hotel",
                totalFor: "Total for",
                persons: "people",
                months: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
                days: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"]
            },
            es: {
                subtitle: "¬°Sin estr√©s, reserva felicidad! ‚úàÔ∏è",
                budget: "Presupuesto total",
                people: "Cu√°ntas personas",
                person1: "1 persona",
                person2: "2 personas",
                person3: "3 personas",
                person4: "4 personas",
                when: "Cu√°ndo salimos",
                today: "HOY",
                duration: "Por cu√°nto tiempo",
                twoDays: "Dos d√≠as",
                threeDays: "Tres d√≠as",
                fourDays: "Cuatro d√≠as",
                fiveDays: "Cinco d√≠as",
                oneWeek: "Una semana",
                tenDays: "Diez d√≠as",
                twoWeeks: "Dos semanas",
                hotelCategory: "Categor√≠a hotel",
                stars1: "1 estrella",
                stars2: "2 estrellas",
                stars3: "3 estrellas",
                stars4: "4 estrellas",
                stars5: "5 estrellas",
                travelVibes: "Travel vibes",
                sea: "üèñÔ∏è MAR",
                city: "üé® CIUDAD DE ARTE",
                mountain: "üèîÔ∏è MONTA√ëA",
                whereFrom: "¬øDesde d√≥nde?",
                searchAirport: "Busca tu aeropuerto...",
                letsGo: "¬°Volemos! üõ´",
                findingAdventure: "Encontrando tu pr√≥xima aventura",
                yourFlight: "Tu vuelo",
                yourHotel: "Tu hotel",
                outbound: "Ida:",
                return: "Vuelta:",
                airline: "Aerol√≠nea:",
                bookFlight: "Reservar Vuelo",
                rating: "Valoraci√≥n:",
                roomType: "Tipo habitaci√≥n:",
                roomStandard: "Habitaci√≥n est√°ndar",
                roomSuperior: "Habitaci√≥n superior",
                roomSuite: "Suite",
                bookHotel: "Reservar Hotel",
                totalFor: "Total para",
                persons: "personas",
                months: ["ene", "feb", "mar", "abr", "may", "jun", "jul", "ago", "sep", "oct", "nov", "dic"],
                days: ["Dom", "Lun", "Mar", "Mi√©", "Jue", "Vie", "S√°b"]
            },
            fr: {
                subtitle: "Z√©ro stress, r√©servez le bonheur! ‚úàÔ∏è",
                budget: "Budget total",
                people: "Combien de personnes",
                person1: "1 personne",
                person2: "2 personnes",
                person3: "3 personnes",
                person4: "4 personnes",
                when: "Quand partir",
                today: "AUJOURD'HUI",
                duration: "Pour combien de temps",
                twoDays: "Deux jours",
                threeDays: "Trois jours",
                fourDays: "Quatre jours",
                fiveDays: "Cinq jours",
                oneWeek: "Une semaine",
                tenDays: "Dix jours",
                twoWeeks: "Deux semaines",
                hotelCategory: "Cat√©gorie h√¥tel",
                stars1: "1 √©toile",
                stars2: "2 √©toiles",
                stars3: "3 √©toiles",
                stars4: "4 √©toiles",
                stars5: "5 √©toiles",
                travelVibes: "Travel vibes",
                sea: "üèñÔ∏è MER",
                city: "üé® VILLE D'ART",
                mountain: "üèîÔ∏è MONTAGNE",
                whereFrom: "D'o√π partez-vous?",
                searchAirport: "Cherchez votre a√©roport...",
                letsGo: "Volons! üõ´",
                findingAdventure: "Je trouve votre prochaine aventure",
                yourFlight: "Votre vol",
                yourHotel: "Votre h√¥tel",
                outbound: "Aller:",
                return: "Retour:",
                airline: "Compagnie:",
                bookFlight: "R√©server Vol",
                rating: "√âvaluation:",
                roomType: "Type de chambre:",
                roomStandard: "Chambre standard",
                roomSuperior: "Chambre sup√©rieure",
                roomSuite: "Suite",
                bookHotel: "R√©server H√¥tel",
                totalFor: "Total pour",
                persons: "personnes",
                months: ["jan", "f√©v", "mar", "avr", "mai", "juin", "juil", "ao√ª", "sep", "oct", "nov", "d√©c"],
                days: ["Dim", "Lun", "Mar", "Mer", "Jeu", "Ven", "Sam"]
            },
            de: {
                subtitle: "Kein Stress, buche Gl√ºck! ‚úàÔ∏è",
                budget: "Gesamtbudget",
                people: "Wie viele Personen",
                person1: "1 Person",
                person2: "2 Personen",
                person3: "3 Personen",
                person4: "4 Personen",
                when: "Wann geht's los",
                today: "HEUTE",
                duration: "Wie lange",
                twoDays: "Zwei Tage",
                threeDays: "Drei Tage",
                fourDays: "Vier Tage",
                fiveDays: "F√ºnf Tage",
                oneWeek: "Eine Woche",
                tenDays: "Zehn Tage",
                twoWeeks: "Zwei Wochen",
                hotelCategory: "Hotelkategorie",
                stars1: "1 Stern",
                stars2: "2 Sterne",
                stars3: "3 Sterne",
                stars4: "4 Sterne",
                stars5: "5 Sterne",
                travelVibes: "Travel vibes",
                sea: "üèñÔ∏è MEER",
                city: "üé® KUNSTSTADT",
                mountain: "üèîÔ∏è BERGE",
                whereFrom: "Von wo?",
                searchAirport: "Flughafen suchen...",
                letsGo: "Los geht's! üõ´",
                findingAdventure: "Ich finde dein n√§chstes Abenteuer",
                yourFlight: "Dein Flug",
                yourHotel: "Dein Hotel",
                outbound: "Hinflug:",
                return: "R√ºckflug:",
                airline: "Fluggesellschaft:",
                bookFlight: "Flug buchen",
                rating: "Bewertung:",
                roomType: "Zimmertyp:",
                roomStandard: "Standardzimmer",
                roomSuperior: "Superior Zimmer",
                roomSuite: "Suite",
                bookHotel: "Hotel buchen",
                totalFor: "Gesamt f√ºr",
                persons: "Personen",
                months: ["Jan", "Feb", "M√§r", "Apr", "Mai", "Jun", "Jul", "Aug", "Sep", "Okt", "Nov", "Dez"],
                days: ["So", "Mo", "Di", "Mi", "Do", "Fr", "Sa"]
            }
        };

        // STATO GLOBALE
        let currentLang = 'it';
        let selectedDate = new Date();
        let vibePosition = 50;
        let isDragging = false;
        let clickTimer = null;
        let selectedDuration = 2;
        let userLocation = null;
        let selectedAirport = null;
        let hasMovedSlider = false;
        let selectedStars = 3;
        
        // DATABASE DESTINAZIONI (versione ridotta per esempio)
        const destinations = [
            {
                position: 0,
                name: 'Santorini',
                country: 'Greece',
                tagline: {
                    it: 'Il sogno greco',
                    en: 'The Greek dream',
                    es: 'El sue√±o griego',
                    fr: 'Le r√™ve grec',
                    de: 'Der griechische Traum'
                },
                description: {
                    it: 'Tramonti che il mondo ci invidia, case bianche e cupole blu che si specchiano nell\'Egeo.',
                    en: 'Sunsets the world envies, white houses and blue domes reflected in the Aegean.',
                    es: 'Atardeceres que el mundo envidia, casas blancas y c√∫pulas azules reflejadas en el Egeo.',
                    fr: 'Des couchers de soleil que le monde envie, maisons blanches et d√¥mes bleus refl√©t√©s dans la mer √âg√©e.',
                    de: 'Sonnenunterg√§nge, um die uns die Welt beneidet, wei√üe H√§user und blaue Kuppeln spiegeln sich in der √Ñg√§is.'
                },
                searchTerm: 'Santorini,+Greece',
                priceIndex: 4,
                quote: {
                    it: '"In nessun altro luogo il tramonto ha lo stesso sapore" - Odysseas Elytis',
                    en: '"Nowhere else does the sunset taste the same" - Odysseas Elytis',
                    es: '"En ning√∫n otro lugar el atardecer tiene el mismo sabor" - Odysseas Elytis',
                    fr: '"Nulle part ailleurs le coucher de soleil n\'a le m√™me go√ªt" - Odysseas Elytis',
                    de: '"Nirgendwo sonst schmeckt der Sonnenuntergang gleich" - Odysseas Elytis'
                }
            },
            {
                position: 50,
                name: 'Rome',
                country: 'Italy',
                tagline: {
                    it: 'La Citt√† Eterna',
                    en: 'The Eternal City',
                    es: 'La Ciudad Eterna',
                    fr: 'La Ville √âternelle',
                    de: 'Die Ewige Stadt'
                },
                description: {
                    it: 'Dove ogni angolo √® un museo e la storia si respira tra carbonara e Colosseo.',
                    en: 'Where every corner is a museum and history breathes between carbonara and Colosseum.',
                    es: 'Donde cada esquina es un museo y la historia se respira entre carbonara y Coliseo.',
                    fr: 'O√π chaque coin est un mus√©e et l\'histoire respire entre carbonara et Colis√©e.',
                    de: 'Wo jede Ecke ein Museum ist und Geschichte zwischen Carbonara und Kolosseum atmet.'
                },
                searchTerm: 'Rome,+Italy',
                priceIndex: 3,
                quote: {
                    it: '"Roma √® la capitale del mondo" - Goethe',
                    en: '"Rome is the capital of the world" - Goethe',
                    es: '"Roma es la capital del mundo" - Goethe',
                    fr: '"Rome est la capitale du monde" - Goethe',
                    de: '"Rom ist die Hauptstadt der Welt" - Goethe'
                }
            },
            {
                position: 100,
                name: 'Zermatt',
                country: 'Switzerland',
                tagline: {
                    it: 'All\'ombra del Cervino',
                    en: 'In the shadow of Matterhorn',
                    es: 'A la sombra del Cervino',
                    fr: '√Ä l\'ombre du Cervin',
                    de: 'Im Schatten des Matterhorns'
                },
                description: {
                    it: 'Il villaggio senza auto dove il Cervino domina ogni panorama e la neve √® garantita.',
                    en: 'The car-free village where Matterhorn dominates every view and snow is guaranteed.',
                    es: 'El pueblo sin coches donde el Cervino domina cada vista y la nieve est√° garantizada.',
                    fr: 'Le village sans voitures o√π le Cervin domine chaque vue et la neige est garantie.',
                    de: 'Das autofreie Dorf, wo das Matterhorn jede Aussicht dominiert und Schnee garantiert ist.'
                },
                searchTerm: 'Zermatt,+Switzerland',
                priceIndex: 5,
                quote: {
                    it: '"Il Cervino non si conquista, ti permette di salire" - Edward Whymper',
                    en: '"The Matterhorn is not conquered, it allows you to climb" - Edward Whymper',
                    es: '"El Cervino no se conquista, te permite subir" - Edward Whymper',
                    fr: '"Le Cervin ne se conquiert pas, il vous permet de monter" - Edward Whymper',
                    de: '"Das Matterhorn wird nicht erobert, es erlaubt dir zu steigen" - Edward Whymper'
                }
            }
        ];

        // FUNZIONE CAMBIO LINGUA
        function changeLanguage(lang) {
            currentLang = lang;
            
            // Update active button
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.lang === lang);
            });
            
            // Update all translations
            document.querySelectorAll('[data-translate]').forEach(el => {
                const key = el.dataset.translate;
                if (translations[lang][key]) {
                    el.textContent = translations[lang][key];
                }
            });
            
            // Update placeholders
            document.querySelectorAll('[data-translate-placeholder]').forEach(el => {
                const key = el.dataset.translatePlaceholder;
                if (translations[lang][key]) {
                    el.placeholder = translations[lang][key];
                }
            });
            
            // Update dropdowns
            updateDateMenu();
            updateDurationMenu();
            updateStarsLabel();
            
            // Update HTML lang
            document.documentElement.lang = lang;
        }

        // INIZIALIZZA DATE MENU
        function initDateMenu() {
            updateDateMenu();
        }
        
        function updateDateMenu() {
            const menu = document.getElementById('date-menu');
            menu.innerHTML = '';
            
            const t = translations[currentLang];
            
            // OGGI
            const oggi = document.createElement('div');
            oggi.className = 'dropdown-item';
            oggi.textContent = t.today;
            oggi.onclick = () => selectDate(new Date(), t.today);
            menu.appendChild(oggi);
            
            // Prossimi 30 giorni
            for (let i = 1; i < 30; i++) {
                const date = new Date();
                date.setDate(date.getDate() + i);
                
                const item = document.createElement('div');
                item.className = 'dropdown-item';
                item.textContent = `${t.days[date.getDay()]} ${date.getDate()} ${t.months[date.getMonth()]}`;
                item.onclick = () => selectDate(date, item.textContent);
                menu.appendChild(item);
            }
        }
        
        // INIZIALIZZA DURATION MENU
        function initDurationMenu() {
            updateDurationMenu();
        }
        
        function updateDurationMenu() {
            const menu = document.getElementById('duration-menu');
            menu.innerHTML = '';
            
            const t = translations[currentLang];
            const durations = [
                {value: 2, key: 'twoDays'},
                {value: 3, key: 'threeDays'},
                {value: 4, key: 'fourDays'},
                {value: 5, key: 'fiveDays'},
                {value: 7, key: 'oneWeek'},
                {value: 10, key: 'tenDays'},
                {value: 14, key: 'twoWeeks'}
            ];
            
            durations.forEach(dur => {
                const item = document.createElement('div');
                item.className = 'dropdown-item';
                item.textContent = t[dur.key];
                item.onclick = () => selectDuration(dur.value, t[dur.key]);
                menu.appendChild(item);
            });
        }

        // TOGGLE DATE MENU
        function toggleDateMenu() {
            document.getElementById('date-menu').classList.toggle('hidden');
            document.getElementById('duration-menu').classList.add('hidden');
        }
        
        // TOGGLE DURATION MENU
        function toggleDurationMenu() {
            document.getElementById('duration-menu').classList.toggle('hidden');
            document.getElementById('date-menu').classList.add('hidden');
        }

        // SELECT DATE
        function selectDate(date, text) {
            selectedDate = date;
            document.getElementById('when-selected').textContent = text;
            document.getElementById('date-menu').classList.add('hidden');
        }
        
        // SELECT DURATION
        function selectDuration(value, text) {
            selectedDuration = value;
            document.getElementById('duration-selected').textContent = text;
            document.getElementById('duration-menu').classList.add('hidden');
        }
        
        // CHECK GEOLOCATION
        function checkGeolocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        userLocation = {
                            lat: position.coords.latitude,
                            lon: position.coords.longitude
                        };
                        // In produzione potresti determinare l'aeroporto pi√π vicino
                    },
                    (error) => {
                        console.log('Geolocalizzazione non disponibile');
                    }
                );
            }
        }
        
        // FILTER AIRPORTS
        function filterAirports() {
            const search = document.getElementById('airport-search').value.toLowerCase();
            const select = document.getElementById('airport-select');
            const options = select.getElementsByTagName('option');
            
            for (let option of options) {
                const text = option.textContent.toLowerCase();
                option.style.display = text.includes(search) ? '' : 'none';
            }
        }
        
        // CONFIRM AIRPORT
        function confirmAirport() {
            const select = document.getElementById('airport-select');
            if (select.value) {
                selectedAirport = select.value;
                
                document.getElementById('airport-step').classList.add('hidden');
                document.getElementById('loading-step').classList.remove('hidden');
                
                setTimeout(() => {
                    showResults();
                }, 3000);
            } else {
                alert('Select an airport!');
            }
        }

        // MUOVI VIBES DOT
        function moveVibesDot(event) {
            event.preventDefault();
            event.stopPropagation();
            
            isDragging = true;
            const dot = document.getElementById('vibes-dot');
            dot.classList.add('dragging');
            dot.classList.remove('clickable');
            
            if (clickTimer) {
                clearTimeout(clickTimer);
                clickTimer = null;
            }
            
            const slider = document.getElementById('vibes-slider');
            const rect = slider.getBoundingClientRect();
            
            let x;
            if (event.type.includes('touch')) {
                x = event.touches[0].clientX - rect.left;
            } else {
                x = event.clientX - rect.left;
            }
            
            const percentage = (x / rect.width) * 100;
            vibePosition = Math.max(0, Math.min(100, percentage));
            
            dot.style.left = vibePosition + '%';
            
            const centerLabel = document.querySelector('.label-center');
            
            if (!hasMovedSlider) {
                hasMovedSlider = true;
                if (vibePosition < 35 || vibePosition > 65) {
                    centerLabel.classList.remove('hidden');
                }
            } else {
                centerLabel.classList.remove('hidden');
            }
            
            clickTimer = setTimeout(() => {
                isDragging = false;
                dot.classList.remove('dragging');
                dot.classList.add('clickable');
            }, 1000);
        }
        
        // GESTISCI CLICK SUL GLOBO
        function handleGlobeClick(event) {
            event.stopPropagation();
            if (!isDragging && document.getElementById('vibes-dot').classList.contains('clickable')) {
                startGloob();
            }
        }

        // START GLOOB
        async function startGloob() {
            const budget = parseInt(document.getElementById('budget').value);
            
            if (budget < 100) {
                alert(currentLang === 'it' ? 'Budget minimo ‚Ç¨100' : 'Minimum budget ‚Ç¨100');
                return;
            }
            
            if (selectedAirport) {
                document.getElementById('form-step').classList.add('hidden');
                document.getElementById('loading-step').classList.remove('hidden');
                
                setTimeout(() => {
                    showResults();
                }, 3000);
            } else {
                document.getElementById('form-step').classList.add('hidden');
                document.getElementById('airport-step').classList.remove('hidden');
            }
        }

        // MOSTRA RISULTATI
        async function showResults() {
            document.getElementById('loading-step').classList.add('hidden');
            document.getElementById('result-step').classList.remove('hidden');
            
            const budget = parseInt(document.getElementById('budget').value);
            const people = parseInt(document.getElementById('people').value);
            const currency = document.getElementById('currency').value;
            const currencySymbol = currency === 'EUR' ? '‚Ç¨' : currency === 'GBP' ? '¬£' : currency === 'USD' ? '$' : currency + ' ';
            
            // Trova destinazione
            const destination = getDestinationByPosition(vibePosition);
            
            // Prezzi
            const basePrice = [40, 60, 90, 150, 280][selectedStars - 1];
            const hotelPrice = Math.round(basePrice * (destination.priceIndex / 3));
            const hotelTotal = hotelPrice * selectedDuration;
            
            const flightPrice = Math.round(80 + (destination.priceIndex * 20) + (Math.random() * 40));
            const flightTotal = flightPrice * 2;
            
            const total = hotelTotal + flightTotal;
            
            // Date
            const checkIn = new Date(selectedDate);
            const checkOut = new Date(selectedDate);
            checkOut.setDate(checkOut.getDate() + selectedDuration);
            
            // Aggiorna UI con traduzioni
            document.getElementById('destination-name').textContent = `${destination.name}, ${destination.country}`;
            document.getElementById('ai-description').textContent = destination.description[currentLang] || destination.description.en;
            document.getElementById('total-people').textContent = people;
            
            // Hotel
            const hotelNames = ['Grand Hotel', 'Boutique Hotel', 'Hotel Central', 'Hotel Vista', 'Luxury Resort'];
            const hotelName = `${hotelNames[selectedStars-1]} ${destination.name}`;
            
            document.getElementById('hotel-name').textContent = hotelName;
            document.getElementById('hotel-stars').textContent = '‚≠ê'.repeat(selectedStars);
            document.getElementById('hotel-rating').textContent = `${8 + (selectedStars * 0.3)}/10`;
            
            const t = translations[currentLang];
            document.getElementById('hotel-room').textContent = selectedStars <= 2 ? t.roomStandard : selectedStars <= 4 ? t.roomSuperior : t.roomSuite;
            document.getElementById('hotel-price').textContent = `${currencySymbol}${hotelTotal}`;
            
            // Volo
            const airlines = ['Ryanair', 'EasyJet', 'Vueling', 'Wizz Air', 'ITA Airways', 'Lufthansa'];
            document.getElementById('flight-outbound').textContent = 
                `${selectedAirport} ‚Üí ${destination.name} | ${checkIn.toLocaleDateString(currentLang)} 08:30`;
            document.getElementById('flight-return').textContent = 
                `${destination.name} ‚Üí ${selectedAirport} | ${checkOut.toLocaleDateString(currentLang)} 18:45`;
            document.getElementById('flight-airline').textContent = airlines[Math.floor(Math.random() * airlines.length)];
            document.getElementById('flight-price').textContent = `${currencySymbol}${flightTotal}`;
            
            // Totale
            document.getElementById('total-price').textContent = `${currencySymbol}${total}`;
            
            // Citazione
            const quote = destination.quote[currentLang] || destination.quote.en;
            const quoteParts = quote.split(' - ');
            document.getElementById('quote-text').textContent = quoteParts[0];
            document.getElementById('quote-author').textContent = '- ' + quoteParts[1];
            
            // Link Trip.com
            document.getElementById('book-hotel').onclick = () => {
                const checkInDate = checkIn.toISOString().split('T')[0];
                const checkOutDate = checkOut.toISOString().split('T')[0];
                
                const tripUrl = `https://trip.tpk.lu/DCFSQxzu?url=https://www.trip.com/hotels/list?cityName=${encodeURIComponent(destination.name)}&checkIn=${checkInDate}&checkOut=${checkOutDate}&adult=${people}&crn=1`;
                
                window.open(tripUrl, '_blank');
            };
            
            // Link Skyscanner
            document.getElementById('book-flight').onclick = () => {
                window.open(`https://www.skyscanner.com`, '_blank');
            };
        }
        
        // TROVA DESTINAZIONE PER POSIZIONE
        function getDestinationByPosition(position) {
            // Per questo esempio, ritorna una destinazione random
            return destinations[Math.floor(Math.random() * destinations.length)];
        }

        // SELECT STARS
        function selectStars(stars) {
            selectedStars = stars;
            const starElements = document.querySelectorAll('.star');
            
            starElements.forEach((star, index) => {
                if (index < stars) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
            
            updateStarsLabel();
        }
        
        function updateStarsLabel() {
            const t = translations[currentLang];
            const labels = [t.stars1, t.stars2, t.stars3, t.stars4, t.stars5];
            document.getElementById('stars-label').textContent = labels[selectedStars - 1];
        }
        
        // INIT AL CARICAMENTO
        window.onload = function() {
            // Setup language buttons
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.addEventListener('click', () => changeLanguage(btn.dataset.lang));
            });
            
            // Detect browser language
            const browserLang = navigator.language.substring(0, 2);
            if (translations[browserLang]) {
                changeLanguage(browserLang);
            }
            
            initDateMenu();
            initDurationMenu();
            checkGeolocation();
            
            selectStars(3);
            
            setTimeout(() => {
                document.getElementById('vibes-dot').classList.add('clickable');
            }, 500);
            
            document.onclick = function(e) {
                if (!e.target.closest('.relative')) {
                    document.getElementById('date-menu').classList.add('hidden');
                    document.getElementById('duration-menu').classList.add('hidden');
                }
            };
        };
    </script>
</body>
</html>
