<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🚀 GLOOBER - Smart Travel Finder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .globe-spin {
            animation: spin 2s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .glass-effect {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .preference-btn {
            transition: all 0.3s ease;
        }
        
        .preference-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: scale(1.05);
        }
        
        .airline-logo {
            width: 30px;
            height: 30px;
            object-fit: contain;
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl md:text-6xl font-bold text-white mb-4">
                🌍 GLOOBER
            </h1>
            <p class="text-xl text-white/80 mb-2">Smart Travel Destination Finder</p>
            <p class="text-lg text-white/60">Gloob your new destination!</p>
        </div>

        <!-- Main Form -->
        <div class="max-w-2xl mx-auto glass-effect rounded-3xl p-8 mb-8">
            <!-- Budget -->
            <div class="mb-6">
                <label class="block text-white text-lg font-medium mb-3">💰 Budget (€)</label>
                <div class="flex gap-2">
                    <input type="number" id="budget" value="800" min="100" max="5000" 
                           class="flex-1 p-4 rounded-xl bg-white/20 text-white placeholder-white/50 border border-white/30 focus:border-white/60 focus:outline-none">
                    <span class="flex items-center text-white/70 text-sm px-3">per persona</span>
                </div>
            </div>

            <!-- People -->
            <div class="mb-6">
                <label class="block text-white text-lg font-medium mb-3">👥 Persone</label>
                <select id="people" class="w-full p-4 rounded-xl bg-white/20 text-white border border-white/30 focus:border-white/60 focus:outline-none">
                    <option value="1">1 persona</option>
                    <option value="2" selected>2 persone</option>
                    <option value="3">3 persone</option>
                    <option value="4">4 persone</option>
                    <option value="5">5+ persone</option>
                </select>
            </div>

            <!-- Duration -->
            <div class="mb-6">
                <label class="block text-white text-lg font-medium mb-3">📅 Durata</label>
                <select id="duration" class="w-full p-4 rounded-xl bg-white/20 text-white border border-white/30 focus:border-white/60 focus:outline-none">
                    <option value="3">Weekend (3 giorni)</option>
                    <option value="5">Lungo weekend (5 giorni)</option>
                    <option value="7" selected>Una settimana (7 giorni)</option>
                    <option value="10">10 giorni</option>
                    <option value="14">Due settimane (14 giorni)</option>
                </select>
            </div>

            <!-- Accommodation -->
            <div class="mb-6">
                <label class="block text-white text-lg font-medium mb-3">🏨 Tipo alloggio</label>
                <select id="accommodation" class="w-full p-4 rounded-xl bg-white/20 text-white border border-white/30 focus:border-white/60 focus:outline-none">
                    <option value="hotel">Hotel</option>
                    <option value="bnb">B&B / Guest House</option>
                    <option value="hostel">Hostel</option>
                    <option value="apartment">Appartamento</option>
                    <option value="resort">Resort</option>
                </select>
            </div>

            <!-- Preference -->
            <div class="mb-8">
                <label class="block text-white text-lg font-medium mb-3">✨ Preferenza (scegli una)</label>
                <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                    <button class="preference-btn p-4 rounded-xl bg-white/20 text-white border border-white/30 hover:bg-white/30 text-center" data-preference="mare">
                        🏖️<br><span class="text-sm">Mare</span>
                    </button>
                    <button class="preference-btn p-4 rounded-xl bg-white/20 text-white border border-white/30 hover:bg-white/30 text-center" data-preference="montagna">
                        🏔️<br><span class="text-sm">Montagna</span>
                    </button>
                    <button class="preference-btn p-4 rounded-xl bg-white/20 text-white border border-white/30 hover:bg-white/30 text-center" data-preference="citta">
                        🏛️<br><span class="text-sm">Città</span>
                    </button>
                    <button class="preference-btn p-4 rounded-xl bg-white/20 text-white border border-white/30 hover:bg-white/30 text-center" data-preference="cultura">
                        🎭<br><span class="text-sm">Cultura</span>
                    </button>
                    <button class="preference-btn p-4 rounded-xl bg-white/20 text-white border border-white/30 hover:bg-white/30 text-center" data-preference="avventura">
                        🎿<br><span class="text-sm">Avventura</span>
                    </button>
                    <button class="preference-btn p-4 rounded-xl bg-white/20 text-white border border-white/30 hover:bg-white/30 text-center" data-preference="relax">
                        🧘<br><span class="text-sm">Relax</span>
                    </button>
                </div>
            </div>

            <!-- Globe Button -->
            <div class="text-center">
                <button id="globe-btn" class="bg-white text-purple-600 font-bold text-xl px-12 py-4 rounded-full hover:bg-purple-50 transition-all duration-300 shadow-lg">
                    <span id="globe-icon" class="text-3xl mr-3">🌍</span>
                    GLOOB IT!
                </button>
            </div>
        </div>

        <!-- Results -->
        <div id="results" class="hidden max-w-4xl mx-auto glass-effect rounded-3xl p-8">
            <div id="result-content"></div>
        </div>
    </div>

    <script>
        // Smart Destinations Database (3 strategic locations)
        const destinations = {
            mare: {
                name: 'Santorini',
                country: 'Grecia',
                image: '🏖️',
                basePrice: 350,
                description: 'Isola romantica con tramonti mozzafiato e architettura cicladica',
                highlights: ['Spiagge vulcaniche', 'Tramonti di Oia', 'Vini locali', 'Villaggi pittoreschi'],
                bestMonths: ['mag', 'giu', 'lug', 'ago', 'set'],
                category: 'romantic-luxury'
            },
            montagna: {
                name: 'Innsbruck',
                country: 'Austria',
                image: '🏔️',
                basePrice: 280,
                description: 'Città alpina circondata dalle Alpi tirolesi',
                highlights: ['Sci e snowboard', 'Centri storici', 'Funivie panoramiche', 'Gastronomia alpina'],
                bestMonths: ['dic', 'gen', 'feb', 'giu', 'lug', 'ago'],
                category: 'adventure-nature'
            },
            citta: {
                name: 'Praga',
                country: 'Repubblica Ceca',
                image: '🏛️',
                basePrice: 220,
                description: 'Città delle cento torri ricca di storia e cultura',
                highlights: ['Castello di Praga', 'Ponte Carlo', 'Birra locale', 'Architettura gotica'],
                bestMonths: ['apr', 'mag', 'giu', 'set', 'ott'],
                category: 'culture-city'
            }
        };

        // Smart Algorithm Variables
        let selectedPreference = null;
        let currentResult = null;

        // Initialize App
        function init() {
            setupEventListeners();
            updateSeasonalPricing();
        }

        function setupEventListeners() {
            // Preference buttons (single selection)
            document.querySelectorAll('.preference-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    // Remove active class from all buttons
                    document.querySelectorAll('.preference-btn').forEach(b => b.classList.remove('active'));
                    // Add active class to clicked button
                    btn.classList.add('active');
                    selectedPreference = btn.dataset.preference;
                });
            });

            // Globe button
            document.getElementById('globe-btn').addEventListener('click', findDestination);
        }

        // Smart Seasonal Pricing Algorithm
        function updateSeasonalPricing() {
            const month = new Date().getMonth();
            const currentMonth = ['gen', 'feb', 'mar', 'apr', 'mag', 'giu', 
                                 'lug', 'ago', 'set', 'ott', 'nov', 'dic'][month];
            
            Object.values(destinations).forEach(dest => {
                // High season pricing
                if (dest.bestMonths.includes(currentMonth)) {
                    dest.currentPrice = Math.round(dest.basePrice * 1.3);
                    dest.season = 'high';
                } else {
                    dest.currentPrice = dest.basePrice;
                    dest.season = 'normal';
                }
            });
        }

        // Smart Destination Selection Algorithm
        function findDestination() {
            const budget = parseInt(document.getElementById('budget').value);
            const people = parseInt(document.getElementById('people').value);
            const duration = parseInt(document.getElementById('duration').value);
            const accommodation = document.getElementById('accommodation').value;

            if (!selectedPreference) {
                alert('Seleziona una preferenza prima di cercare!');
                return;
            }

            // Start globe animation
            const globeIcon = document.getElementById('globe-icon');
            const globeBtn = document.getElementById('globe-btn');
            
            globeIcon.classList.add('globe-spin');
            globeBtn.disabled = true;
            globeBtn.innerHTML = '<span class="text-3xl mr-3 globe-spin">🌍</span>CERCANDO...';

            // Smart matching algorithm
            setTimeout(() => {
                const matchedDest = smartMatch(budget, people, duration, accommodation, selectedPreference);
                displayResult(matchedDest, budget, people, duration, accommodation);
                
                // Reset button
                globeIcon.classList.remove('globe-spin');
                globeBtn.disabled = false;
                globeBtn.innerHTML = '<span class="text-3xl mr-3">🌍</span>GLOOB IT!';
            }, 2000);
        }

        // Smart Matching Algorithm
        function smartMatch(budget, people, duration, accommodation, preference) {
            let bestMatch = null;
            let compatibilityScore = 0;

            // Direct preference match
            if (destinations[preference]) {
                bestMatch = destinations[preference];
                compatibilityScore = 100;
            } else {
                // Smart fallback logic
                if (preference === 'cultura') {
                    bestMatch = destinations.citta;
                    compatibilityScore = 85;
                } else if (preference === 'avventura') {
                    bestMatch = destinations.montagna;
                    compatibilityScore = 90;
                } else if (preference === 'relax') {
                    bestMatch = destinations.mare;
                    compatibilityScore = 80;
                } else {
                    // Random selection weighted by budget
                    const affordable = Object.values(destinations).filter(d => d.currentPrice <= budget);
                    bestMatch = affordable[Math.floor(Math.random() * affordable.length)] || destinations.citta;
                    compatibilityScore = 70;
                }
            }

            // Calculate dynamic pricing
            const totalBudget = budget * people;
            const dailyCost = Math.round(bestMatch.currentPrice / 7 * duration);
            const accommodationMultiplier = {
                'hostel': 0.7,
                'bnb': 0.9,
                'hotel': 1.0,
                'apartment': 0.8,
                'resort': 1.4
            };

            const finalPrice = Math.round(dailyCost * accommodationMultiplier[accommodation]);
            const flightPrice = Math.round(150 + Math.random() * 200); // Simulated flight cost

            return {
                ...bestMatch,
                finalPrice,
                flightPrice,
                totalCost: finalPrice + flightPrice,
                compatibility: compatibilityScore,
                recommendation: generateRecommendation(bestMatch, preference, budget),
                dates: generateDates(duration)
            };
        }

        // Generate Smart Recommendation
        function generateRecommendation(dest, preference, budget) {
            const recommendations = {
                'Santorini': [
                    'Prenota la cena al tramonto a Oia',
                    'Visita le spiagge di sabbia nera',
                    'Degusta i vini locali Assyrtiko'
                ],
                'Innsbruck': [
                    'Prendi la funivia Nordkette per la vista panoramica',
                    'Esplora il centro storico medievale',
                    'Prova lo schnitzel tradizionale tirolese'
                ],
                'Praga': [
                    'Cammina sul Ponte Carlo al mattino presto',
                    'Visita il Castello di Praga al tramonto',
                    'Assaggia la birra Pilsner originale'
                ]
            };

            return recommendations[dest.name] || ['Esplora la destinazione', 'Assaggia la cucina locale', 'Scopri la cultura'];
        }

        // Generate Travel Dates
        function generateDates(duration) {
            const start = new Date();
            start.setDate(start.getDate() + Math.floor(Math.random() * 60) + 7); // 1-9 weeks from now
            
            const end = new Date(start);
            end.setDate(end.getDate() + duration - 1);
            
            return {
                start: start.toLocaleDateString('it-IT'),
                end: end.toLocaleDateString('it-IT'),
                startDate: start,
                endDate: end
            };
        }

        // Display Result
        function displayResult(result, budget, people, duration, accommodation) {
            currentResult = result;
            const resultDiv = document.getElementById('results');
            const contentDiv = document.getElementById('result-content');
            
            const totalForGroup = result.totalCost * people;
            const isAffordable = totalForGroup <= (budget * people);
            const budgetStatus = isAffordable ? 
                `✅ Entro budget (-${Math.round(budget * people - totalForGroup)}€)` : 
                `⚠️ Sopra budget (+${Math.round(totalForGroup - budget * people)}€)`;

            // Simulate airline
            const airlines = ['✈️ Lufthansa', '✈️ ITA Airways', '✈️ Ryanair', '✈️ EasyJet'];
            const selectedAirline = airlines[Math.floor(Math.random() * airlines.length)];

            contentDiv.innerHTML = `
                <div class="text-center mb-8">
                    <h2 class="text-4xl font-bold text-white mb-2">${result.image} ${result.name}</h2>
                    <p class="text-xl text-white/80">${result.country}</p>
                    <div class="text-lg text-white/60 mt-2">
                        Compatibilità: ${result.compatibility}% • ${result.season === 'high' ? 'Alta stagione' : 'Stagione normale'}
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-8 mb-8">
                    <!-- Description -->
                    <div class="bg-white/10 rounded-2xl p-6">
                        <h3 class="text-xl font-semibold text-white mb-4">📍 Destinazione</h3>
                        <p class="text-white/80 mb-4">${result.description}</p>
                        <div class="space-y-2">
                            ${result.highlights.map(h => `<div class="text-white/70">• ${h}</div>`).join('')}
                        </div>
                    </div>

                    <!-- Costs -->
                    <div class="bg-white/10 rounded-2xl p-6">
                        <h3 class="text-xl font-semibold text-white mb-4">💰 Costi</h3>
                        <div class="space-y-3 text-white/80">
                            <div class="flex justify-between">
                                <span>Alloggio (${duration} giorni):</span>
                                <span>€${result.finalPrice}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Volo A/R:</span>
                                <span>€${result.flightPrice}</span>
                            </div>
                            <div class="border-t border-white/30 pt-2 flex justify-between font-semibold">
                                <span>Per persona:</span>
                                <span>€${result.totalCost}</span>
                            </div>
                            <div class="flex justify-between text-lg font-bold">
                                <span>Totale gruppo (${people} persone):</span>
                                <span>€${totalForGroup}</span>
                            </div>
                            <div class="text-center text-sm ${isAffordable ? 'text-green-300' : 'text-yellow-300'}">
                                ${budgetStatus}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Travel Details -->
                <div class="bg-white/10 rounded-2xl p-6 mb-8">
                    <h3 class="text-xl font-semibold text-white mb-4">✈️ Dettagli Viaggio</h3>
                    <div class="grid md:grid-cols-3 gap-4 text-white/80">
                        <div>
                            <div class="font-medium text-white">Date</div>
                            <div>${result.dates.start} - ${result.dates.end}</div>
                        </div>
                        <div>
                            <div class="font-medium text-white">Compagnia</div>
                            <div>${selectedAirline}</div>
                        </div>
                        <div>
                            <div class="font-medium text-white">Alloggio</div>
                            <div class="capitalize">${accommodation.replace('-', ' ')}</div>
                        </div>
                    </div>
                </div>

                <!-- Recommendations -->
                <div class="bg-white/10 rounded-2xl p-6 mb-8">
                    <h3 class="text-xl font-semibold text-white mb-4">💡 Raccomandazioni Smart</h3>
                    <div class="space-y-2">
                        ${result.recommendation.map(rec => `<div class="text-white/80">• ${rec}</div>`).join('')}
                    </div>
                </div>

                <!-- Actions -->
                <div class="text-center space-y-4">
                    <button onclick="bookTrip()" class="bg-green-500 hover:bg-green-600 text-white font-bold text-lg px-8 py-4 rounded-xl transition-all duration-300 shadow-lg">
                        📱 Prenota Ora!
                    </button>
                    <button onclick="newSearch()" class="bg-white/20 hover:bg-white/30 text-white font-medium px-6 py-3 rounded-xl transition-all duration-300 ml-4">
                        🔄 Nuova Ricerca
                    </button>
                </div>
            `;

            resultDiv.classList.remove('hidden');
            resultDiv.scrollIntoView({ behavior: 'smooth' });
        }

        // Booking Function
        function bookTrip() {
            if (!currentResult) return;
            
            const params = new URLSearchParams({
                destination: currentResult.name,
                country: currentResult.country,
                checkin: currentResult.dates.startDate.toISOString().split('T')[0],
                checkout: currentResult.dates.endDate.toISOString().split('T')[0],
                guests: document.getElementById('people').value
            });

            const bookingUrl = `https://booking.com/search?${params.toString()}`;
            window.open(bookingUrl, '_blank');
        }

        // New Search Function
        function newSearch() {
            document.getElementById('results').classList.add('hidden');
            document.querySelectorAll('.preference-btn').forEach(btn => btn.classList.remove('active'));
            selectedPreference = null;
            currentResult = null;
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Start the app
        init();
    </script>
</body>
</html>
